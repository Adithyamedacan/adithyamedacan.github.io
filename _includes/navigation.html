<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <a href="{{ '/' | relative_url }}" class="sidebar-brand">{{ site.title }}</a>
    </div>
    
    <nav class="sidebar-nav">
        <ul class="nav-menu">
            {% for item in site.navigation %}
            <li class="nav-item {% if item.items %}has-dropdown{% endif %}">
                {% if item.url %}
                    <a href="{{ item.url | relative_url }}" 
                       class="nav-link {% if page.url == item.url %}active{% endif %}">
                        {{ item.title }}
                    </a>
                {% else %}
                    <a href="#" class="nav-link nav-dropdown-toggle" onclick="toggleDropdown(event, this)">
                        {{ item.title }}
                        <span class="dropdown-arrow">â–¼</span>
                    </a>
                    <ul class="nav-dropdown">
                        {% for subitem in item.items %}
                        <li class="nav-dropdown-item">
                            <a href="{{ subitem.url | relative_url }}" 
                               class="nav-dropdown-link {% if page.url == subitem.url %}active{% endif %}">
                                {{ subitem.title }}
                            </a>
                        </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </nav>
</aside>

<div class="sidebar-overlay" id="sidebarOverlay"></div>

<script>
    // Sidebar toggle for mobile
    const sidebarToggle = document.getElementById('sidebarToggle');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    
    if (sidebarToggle) {
        sidebarToggle.addEventListener('click', function() {
            sidebar.classList.toggle('active');
            sidebarOverlay.classList.toggle('active');
            document.body.classList.toggle('sidebar-open');
        });
    }

    // Close sidebar when clicking overlay
    sidebarOverlay.addEventListener('click', function() {
        sidebar.classList.remove('active');
        sidebarOverlay.classList.remove('active');
        document.body.classList.remove('sidebar-open');
    });

    // Dropdown toggle function
    function toggleDropdown(event, element) {
        event.preventDefault();
        event.stopPropagation();
        
        const parent = element.parentElement;
        
        // Toggle current dropdown
        parent.classList.toggle('open');
    }

    // Keep dropdown open if current page is in it
    document.addEventListener('DOMContentLoaded', function() {
        const activeLink = document.querySelector('.nav-dropdown-link.active');
        if (activeLink) {
            const parentItem = activeLink.closest('.nav-item');
            if (parentItem) {
                parentItem.classList.add('open');
            }
        }
    });
</script>
